<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Me perdonas?</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Pacifico', cursive;
        }
        body {
            text-align: center;
            background-color: #FFD1DC;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        h2 {
            color: #ff4d6d;
            font-size: 30px;
            animation: latido 1.5s infinite ease-in-out;
        }
        @keyframes latido {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .image {
            width: 200px;
        }
        .buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
        .btn {
            font-size: 18px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: font-size 0.2s ease-out, padding 0.2s ease-out;
        }
        .yes {
            background-color: green;
            color: white;
            position: relative;
            z-index: 10;
            max-width: 100%;
            white-space: nowrap;
        }
        .no {
            background-color: red;
            color: white;
            position: relative;
            z-index: 5;
        }
        .hidden {
            display: none;
            font-size: 22px;
            color: #ff4081;
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <audio id="musica" src="https://raw.githubusercontent.com/Yan030900/Me-perdonas/refs/heads/main/Potaxie20.mp3" loop></audio>

    <img class="image" src="https://raw.githubusercontent.com/Yan030900/Me-perdonas/main/IMG_2018.gif" alt="Cinnamoroll triste">
    <h2>¿Me perdonas?</h2>
    <div class="buttons">
        <button class="btn yes" onclick="iniciarMusica(); mostrarMensaje()">SÍ!!!</button>
        <button class="btn no" onclick="moverBoton()" onmouseenter="moverBoton()" onmouseover="moverBoton()">No.</button>
    </div>
    <p class="hidden" id="mensaje">Te quiero mucho mi nahualita ❤️</p>

    <script>
        let musica = document.getElementById("musica");
        let primerClick = true;
        let contadorNo = 0;
        let frasesNo = [
            "No", "pero segura?", "Segura?", "Segurísima?", "Por favor", 
            "Segurisima?", "Sorry mi Bren", "Perdónameee", "Ya deja de darle aquí", 
            "Di que si", "Apoco si muy enojada", "Ultima oportunidad", "Ultima ultima", 
            "Pégame pero no me dejes", "Orunoruno", "Wimaskui", "Mocha y rencorosa", 
            "No lo vuelvo a hacer", "Dale a siii", "Pícale al verde gigante", 
            "Plz", "Tqm", "Siii"
        ];

        function iniciarMusica() {
            if (primerClick) {
                musica.play();
                primerClick = false;
            }
        }

        function mostrarMensaje() {
            document.getElementById("mensaje").style.display = "block";
            lanzarConfeti();

            let imagen = document.querySelector('.image');
            imagen.src = "https://raw.githubusercontent.com/Yan030900/Me-perdonas/main/IMG_2020.gif?" + new Date().getTime();
        }

        function moverBoton() {
            let botonNo = document.querySelector('.no');
            let botonSi = document.querySelector('.yes');

            if (primerClick) {
                musica.play();
                primerClick = false;
            }

            let maxWidth = window.innerWidth - botonNo.clientWidth;
            let maxHeight = window.innerHeight - botonNo.clientHeight;

            let siRect = botonSi.getBoundingClientRect();
            let nuevoX, nuevoY;

            do {
                nuevoX = Math.random() * maxWidth;
                nuevoY = Math.random() * maxHeight;
            } while (
                nuevoX + botonNo.clientWidth > siRect.left && nuevoX < siRect.right && 
                nuevoY + botonNo.clientHeight > siRect.top && nuevoY < siRect.bottom 
            );

            botonNo.style.position = "absolute";
            botonNo.style.left = `${nuevoX}px`;
            botonNo.style.top = `${nuevoY}px`;

            cambiarTextoBotonNo();
        }

        function cambiarTextoBotonNo() {
            let botonNo = document.querySelector('.no');
            if (contadorNo < frasesNo.length - 1) {
                contadorNo++;
                botonNo.textContent = frasesNo[contadorNo];
            } else {
                botonNo.style.display = "none";
            }
        }

        function lanzarConfeti() {
            let duracion = 2 * 1000;
            let end = Date.now() + duracion;

            (function frame() {
                confetti({
                    particleCount: 7,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    zIndex: 9999
                });
                confetti({
                    particleCount: 7,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    zIndex: 9999
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            })();
        }
    </script>

</body>
</html>
